<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>测试用例5：媒体查询响应式布局</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Topbar: full-width -->
  <header class="topbar">
    <div class="container">
      <h1>测试用例5：媒体查询响应式布局</h1>
      <p class="subtitle">验证 Chrome 对 CSS 媒体查询（Media Queries）的支持，以及响应式布局在不同视口宽度下的稳定性和性能表现。</p>
    </div>
  </header>

  <!-- Page wrapper (used with :has() in CSS for debug overlay) -->
  <main id="page">
    <!-- Toolbar -->
    <section class="toolbar container" aria-label="工具栏">
      <div class="controls">
        <div class="group">
          <strong>状态</strong>
          <div class="status">
            <span>视口宽度：<span id="vw">—</span> px</span>
            <span>JS断点：<span id="bp">—</span></span>
            <span>CLS累计：<span id="cls">0.000</span></span>
          </div>
        </div>
        <div class="group">
          <strong>调试</strong>
          <label class="checkbox">
            <input id="toggle-outline" type="checkbox">
            <span>显示布局边框（仅视觉辅助）</span>
          </label>
          <button id="reset-cls" type="button" class="btn">重置CLS</button>
        </div>
        <div class="group">
          <strong>CSS断点指示（纯CSS）</strong>
          <span class="css-bp-indicator">
            <span data-bp="mobile">当前断点：移动（&lt; 800px）</span>
            <span data-bp="tablet">当前断点：平板（800–1199px）</span>
            <span data-bp="desktop">当前断点：桌面（≥ 1200px）</span>
          </span>
        </div>
      </div>
    </section>

    <!-- Test Area -->
    <section class="test-area container" aria-label="测试区域">
      <!-- Site Navigation -->
      <nav class="site-nav" aria-label="主导航">
        <input class="nav-toggle" id="nav-toggle" type="checkbox" aria-hidden="true">
        <label class="toggle-label" for="nav-toggle" aria-controls="primary-menu" aria-expanded="false">☰ 菜单</label>
        <ul id="primary-menu" class="menu" role="list">
          <li><a href="#card-1">首页</a></li>
          <li><a href="#card-2">栏目一</a></li>
          <li><a href="#card-3">栏目二</a></li>
          <li><a href="#card-4">报告</a></li>
          <li class="hide-on-mobile"><a href="#card-5">关于</a></li>
        </ul>
      </nav>

      <!-- Layout: content + sidebar -->
      <div class="layout">
        <article class="content">
          <h2>主内容区</h2>
          <p>此区域用于观察在不同断点下，内容区的排版与卡片栅格如何根据容器宽度自动调整。请拖动浏览器宽度或使用 DevTools 设备模拟器。</p>

          <div class="card-grid">
            <!-- Cards with aspect-ratio to avoid CLS -->
            <article class="card" id="card-1">
              <figure class="media" aria-label="占位图像"></figure>
              <h3>卡片一</h3>
              <p>窄屏采用单列显示并放大字体；中等宽度变为两列；桌面宽度为三列。</p>
            </article>
            <article class="card" id="card-2">
              <figure class="media"></figure>
              <h3>卡片二</h3>
              <p>通过 <code>@media</code> 改变 <code>display</code> 与 <code>flex-direction</code>，观察布局切换的稳定性。</p>
            </article>
            <article class="card" id="card-3">
              <figure class="media"></figure>
              <h3>卡片三</h3>
              <p>图文模块均设置了固定的 <code>aspect-ratio</code>，避免图片加载造成的布局偏移。</p>
            </article>
            <article class="card" id="card-4">
              <figure class="media"></figure>
              <h3>卡片四</h3>
              <p>频繁拖动窗口宽度以观察 Chrome 在应用媒体查询时的性能与是否出现闪烁。</p>
            </article>
            <article class="card" id="card-5">
              <figure class="media"></figure>
              <h3>卡片五</h3>
              <p>当宽度小于 800px，侧边栏将隐藏；大于等于 800px 时侧边栏显示并与内容并排。</p>
            </article>
            <article class="card" id="card-6">
              <figure class="media"></figure>
              <h3>卡片六</h3>
              <p>在桌面断点（≥1200px）增加栅格间距与边距，验证断点样式是否正确生效。</p>
            </article>
          </div>
        </article>

        <aside class="sidebar" aria-label="侧边栏">
          <h2>侧边栏</h2>
          <div class="widget">
            <h3>辅助信息</h3>
            <p>此模块在 ≥800px 时可见，强调布局显隐测试。</p>
          </div>
          <div class="widget widget-secondary">
            <h3>次要板块</h3>
            <p>此模块在移动端（&lt;800px）隐藏，用于验证 <code>display: none</code> 的断点切换。</p>
          </div>
          <div class="widget widget-desktop-only">
            <h3>仅桌面显示</h3>
            <p>此模块仅在 ≥1200px 显示，用于验证多断点样式覆盖优先级。</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- Explanation -->
    <section class="explain container" aria-label="解释说明">
      <h2>解释说明</h2>
      <h3>测试目标</h3>
      <ul>
        <li>验证 CSS 媒体查询在不同断点下切换布局的正确性与稳定性。</li>
        <li>观察断点切换时是否出现布局错乱、闪烁或内容重叠。</li>
        <li>评估窗口连续缩放时浏览器的性能与视觉稳定性（CLS）。</li>
      </ul>

      <h3>测试方案</h3>
      <ul>
        <li>使用纯 CSS 媒体查询（<code>min-width</code>/<code>max-width</code>）定义三个断点：
          <strong>&lt;800px</strong>（移动）、<strong>800–1199px</strong>（平板）、<strong>≥1200px</strong>（桌面）。</li>
        <li>在不同断点下切换 <code>display</code> 类型、<code>flex-direction</code>、字体大小、间距与元素显隐。</li>
        <li>所有响应式行为不依赖 JavaScript；页面上的 JS 仅用于状态显示与性能观测。</li>
      </ul>

      <h3>使用方法</h3>
      <ol>
        <li>在 Chrome 中打开本页面，拖动窗口宽度或在 DevTools 中切换设备。</li>
        <li>观察导航在移动端是否垂直显示并可通过「菜单」按钮展开。</li>
        <li>确认内容区卡片栅格在 1/2/3 列之间平稳切换；侧边栏在 &lt;800px 隐藏、≥800px 显示。</li>
        <li>可勾选「显示布局边框」辅助观察盒模型（不影响布局计算）。</li>
        <li>查看顶部「状态」中的视口宽度、当前断点与 CLS 累计，点击「重置CLS」可清零。</li>
      </ol>

      <h3>结果评估</h3>
      <ul>
        <li>三个断点下均无元素溢出、错位或不可见的关键内容。</li>
        <li>断点切换瞬间无明显闪烁，CLS 值保持较低（正常交互下应接近 0）。</li>
        <li>拖动窗口时浏览器无卡顿或崩溃，样式变更即时生效。</li>
      </ul>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
